import Web3 from 'web3';
import {
  TransactionConfig,
  TransactionReceipt,
  // PromiEvent 
} from 'web3-core';
import Web3Modal from 'web3modal';
import WalletConnectProvider from '@walletconnect/web3-provider';
import { Magic } from 'magic-sdk';

const providerOptions = {
  walletconnect: {
    package: WalletConnectProvider, // required
    options: {
      infuraId: process.env.REACT_APP_INFURA_ID,
    }
  },
  "custom-magiclink": {
    display: {
      logo: "data:image/gif;base64,R0lGODlhaARTBfMAAAAAAGdQ/2dR/2dS/2hQ/2lQ/2hR/2lR/2hS/2lS/wAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAAAIf8LWE1QIERhdGFYTVA8P3hwYWNrZXQgYmVnaW49J++7vycgaWQ9J1c1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCc/Pgo8eDp4bXBtZXRhIHhtbG5zOng9J2Fkb2JlOm5zOm1ldGEvJyB4OnhtcHRrPSdJbWFnZTo6RXhpZlRvb2wgMTIuMDQnPgo8cmRmOlJERiB4bWxuczpyZGY9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMnPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6dGlmZj0naHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8nPgogIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiA8L3JkZjpEZXNjcmlwdGlvbj4KPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg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",
      name: "Magic Link",
      description: "Let's make some magic!"
    },
    package: Magic,
    options: {
      apiKey: process.env.REACT_APP_MAGIC_LINK_API_KEY
    },
    connector: async (ProviderPackage: any, options: any) => {
      const magic = new ProviderPackage(options.apiKey);
      return magic.rpcProvider;
    }
  }
};

const web3Modal = new Web3Modal({
  network: 'mainnet', // optional
  cacheProvider: true, // optional
  providerOptions // required
});
let web3: null | Web3;
let provider: any;

const connectWeb3 = async () => {
  provider = await web3Modal.connect();
  return provider;
}

const closeWeb3 = () => {
  provider = null;
  web3 = null;
  web3Modal.clearCachedProvider();
}

const getProvider = () => {
  if (!provider) {
    return;
  }
  return provider;

}

const getWeb3 = () => {
  if (!provider) {
    return;
  }
  if (!web3) {
    web3 = new Web3(provider);
    return web3;
  }
  return web3;
}

const web3Transaction = (transactionConfig: TransactionConfig): Promise<TransactionReceipt> | undefined => {
  return new Promise<TransactionReceipt>((resolve, rejects) => {
    getWeb3()?.eth.sendTransaction(transactionConfig, (error: Error, hash: string) => {
      rejects({ error, hash });
    })
      .then(v => {
        resolve(v);
      })
      .catch(e => rejects(e));
  });
}

export { connectWeb3, getWeb3, closeWeb3, getProvider, web3Modal, web3Transaction }